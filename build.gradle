allprojects {
    group = 'org.oopscraft.apps'
    version = '0.0.1-SNAPSHOT'
    repositories {
        maven {
            allowInsecureProtocol = true
            url project.mavenGroupUrl
            credentials {
                username project.mavenUsername
                password project.mavenPassword
            }
        }
        mavenCentral()
    }
    afterEvaluate { project ->
        if(project.plugins.hasPlugin('maven-publish')) {
            project.publishing {
                publications {
                    mavenJava(MavenPublication) {
                        groupId = group
                        artifactId = project.name
                        version = version
                        from components.java
                    }
                }
                repositories {
                    maven {
                        allowInsecureProtocol = true
                        url System.getProperty("mavenPublishUrl")
                        credentials {
                            username System.getProperty("mavenUsername")
                            password System.getProperty("mavenPassword")
                        }
                    }
                }

            }
        }
    }
    configurations.all {
        resolutionStrategy.dependencySubstitution {
            substitute module("org.oopscraft.apps:apps-core") using project(":apps-core")
            substitute module("org.oopscraft.apps:apps-web") using project(":apps-web")
            substitute module("org.oopscraft.apps:apps-batch") using project(":apps-batch")
        }
    }
}

